<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>نظام تسجيل الحضور</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>نظام تسجيل الحضور</h1>
    </header>

    <nav class="nav-tabs">
      <button id="tab-scan" class="tab active" data-tab="scan">المسح</button>
      <button id="tab-dashboard" class="tab" data-tab="dashboard">لوحة التحكم</button>
      <button id="tab-employees" class="tab" data-tab="employees">الموظفين</button>
    </nav>

    <!-- قسم المسح -->
    <section id="scan-section" class="section active">
      <div class="card">
        <h2>مسح رمز QR</h2>
        <div id="reader" style="width: 100%; max-width: 300px; margin: 20px auto;"></div>
        <button id="start-scan-btn" class="btn-primary">بدء المسح</button>
        <button id="stop-scan-btn" class="btn-primary" style="display:none;">إيقاف المسح</button>
        <div id="scan-result" class="scan-result"></div>
      </div>
    </section>

    <!-- لوحة التحكم -->
    <section id="dashboard-section" class="section">
      <div class="card">
        <h2>سجل الحضور اليوم</h2>
        <div class="stats-cards">
          <div class="stat-card absent">
            <span class="icon">❌</span>
            <div><span class="count" id="absent-count">0</span><span class="label">غائب</span></div>
          </div>
          <div class="stat-card late">
            <span class="icon">⏱️</span>
            <div><span class="count" id="late-count">0</span><span class="label">متأخر</span></div>
          </div>
          <div class="stat-card present">
            <span class="icon">✅</span>
            <div><span class="count" id="present-count">0</span><span class="label">حاضر</span></div>
          </div>
        </div>
        <div class="table-container">
          <table>
            <thead>
              
  <tr>
    <th>الموظف</th>
    <th>الحالة</th>
    <th>الدخول</th>
    <th>الانصراف</th>
  </tr>

            </thead>
            <tbody id="attendance-body"></tbody>
          </table>
        </div>
      </div>
    </section>
    <div class="card-header">
  <h2>سجل الحضور اليوم</h2>
  <button id="export-btn" class="btn-primary">تصدير إلى Excel</button>
</div>

    <!-- إدارة الموظفين -->
    <section id="employees-section" class="section">
      <div class="card">
        <div class="card-header">
          <h2>إدارة الموظفين</h2>
          <button id="add-employee-btn" class="btn-primary">إضافة موظف</button>
        </div>
        <div id="employees-list"></div>
      </div>
    </section>
  </div>

  <!-- نافذة إضافة موظف -->
  <div id="employee-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>إضافة موظف جديد</h3>
      <form id="employee-form">
        <input type="text" id="emp-id" placeholder="كود الموظف" required />
        <input type="text" id="first-name" placeholder="الاسم الأول" required />
        <input type="text" id="last-name" placeholder="اسم العائلة" required />
        <input type="date" id="dob" />
        <input type="tel" id="phone" placeholder="رقم الهاتف" />
        <input type="text" id="position" placeholder="المنصب" />
        <input type="time" id="start-time" value="07:00" required />
        <input type="time" id="end-time" value="15:00" required />
        <button type="submit" class="btn-primary">حفظ</button>
        <button type="button" class="btn-cancel">إلغاء</button>
      </form>
    </div>
  </div>

  <!-- نافذة عرض QR -->
  <div id="qr-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>رمز QR</h3>
      <div id="qr-code-container"></div>
      <button id="download-qr" class="btn-primary">تحميل الرمز</button>
    </div>
  </div>

  <!-- المكتبات الخارجية -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
